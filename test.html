<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
    <link rel="stylesheet" href="/assets/css/tailwind.css" />
    <link rel="stylesheet" href="/assets/fontawesome/css/all.min.css" />
    <link rel="stylesheet" href="/assets/css/global.css" />
  </head>
  <body class="grid grid-col-12">
    <div id="data" class="col-span6 mx-auto flex justify-around"></div>

    <script src="/assets/js/jquery.min.js"></script>
    <script>
     const myData = {
		 tree:{
			 name:"aggestor",
			 children:[
				 {
					name:"faida sergine",
					children:[
						{
							name:"yoland faida"
						}
					]
				 },
				 {
					name:"serge makasi",
					children:[
						{
							name:"Mulume Veronique"
						},
						{
							name:"Nancy Toms",
							children:[
								{
									name:"Willy Math",
									children:[
										{
											name:"Mathe Jason"
										},
										{
											name:"Moise Lukundu"
										},
									]
								},
								{
									name:"Nelson Semedo"
								},
							]
						}
					]
				 }
			]
		 }
	 }

	 class BinaryTree{
		root;
		data;
		constructor(data){
			this.data = data
			this.setRoot()
		}
		
		drawBinaryTree(){
			this.showChildren(this.root.children)
		}
		isKeyTreeExists(){
			return this.data.tree ? true : false
		}
		hasAtLeastAChild(data){
			return data.children ? true : false
		}
		showChildren(arr){
			const htmlData = [];
			let length = arr.length, i = 0;
			for(i; i< length; i++){
				const kindaRoot = document.createElement("div")
				kindaRoot.classList = "w-96 flex justify-between h-72 bg-gray-100"
				kindaRoot.setAttribute("data-name", arr[i].name)
				if(this.hasAtLeastAChild(arr[i])){
					if(this.hasAChild(arr[i].children)){
						const parent = `
						<div class="w-36 h-24 flex flex-col">
							<h1 class="flex text-green-500">${arr[i].name}</h1>
							<div  class="flex border-green-500 border rounded text-green-500 h-1">
								${arr[i].children[0].name}
							</div>
						</div>	
						`
						if(kindaRoot.getAttribute("data-name") === arr[i].name){
							kindaRoot.innerHTML = parent 
							//console.log(parent.innerHTML)
							htmlData.push(kindaRoot.innerHTML)
						}
						
					}else if(this.hasChildren(arr[i].children)){
						const parent = `
						<div class="w-36 h-24 flex flex-col">
							<h1 class="flex text-emerald-500">${arr[i].name}</h1>
							<div class="w-72 flex justify-around h-36">
								<div  class="flex border-emerald-500 border rounded text-emerald-500 h-1">
									${arr[i].children[0].name}
								</div>
								<div  class="flex border-emerald-500 border rounded text-emerald-500 h-1">
									${arr[i].children[1].name}
								</div>
							</div>
						</div>
						`

						if(kindaRoot.getAttribute("data-name") === arr[i].name){
							kindaRoot.innerHTML = parent
							htmlData.push(kindaRoot.innerHTML)
						}
						
					}
					this.showChildren(arr[i].children)
				}
				else{
					if(kindaRoot.dataset['name'] === arr[i].name)
						kindaRoot.innerHTML = `<div class="bg-red-500 text-white w-36">${arr[i].name} has no child</div>`
					}
					
			}
			console.log($("body").html(htmlData))
		}
		hasAChild(arr){
			return arr.length  === 1 ? true :false
		}
		hasChildren(arr){
			return arr.length  === 2 ? true :false
		}
		setRoot(){
			if(this.isKeyTreeExists()){
				this.root = this.data.tree
			}else{
				this.root = this.data.children
			}
		}
		
	 }
	 const bts = new BinaryTree(myData)
	 bts.drawBinaryTree()
	 console.log(bts.htmlData)

    </script>
  </body>
</html>
